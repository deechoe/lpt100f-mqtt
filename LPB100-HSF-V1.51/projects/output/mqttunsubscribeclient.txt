; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--c99 --list --split_sections --debug -c --asm --interleave -o.\output\mqttunsubscribeclient.o --asm_dir=.\output\ --list_dir=.\output\ --depend=.\output\mqttunsubscribeclient.d --cpu=Cortex-M3 --apcs=interwork --diag_suppress=9931,494 -I..\sdk\1.51\include -I..\..\usr -I..\..\mqtt -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -D__UVISION_VERSION=523 -D__KEIL_MDK__ -D__LPT100F__ --enum_is_int --signed_chars --omf_browse=.\output\mqttunsubscribeclient.crf ..\..\mqtt\MQTTUnsubscribeClient.c]
                          THUMB

                          AREA ||i.MQTTDeserialize_unsuback||, CODE, READONLY, ALIGN=1

                  MQTTDeserialize_unsuback PROC
;;;91       */
;;;92     int MQTTDeserialize_unsuback(unsigned short* packetid, unsigned char* buf, int buflen)
000000  b53e              PUSH     {r1-r5,lr}
;;;93     {
;;;94     	unsigned char type = 0;
000002  2400              MOVS     r4,#0
;;;95     	unsigned char dup = 0;
;;;96     	int rc = 0;
;;;97     
;;;98     	FUNC_ENTRY;
;;;99     	rc = MQTTDeserialize_ack(&type, &dup, packetid, buf, buflen);
000004  9200              STR      r2,[sp,#0]
000006  460b              MOV      r3,r1
000008  4602              MOV      r2,r0
00000a  f88d4004          STRB     r4,[sp,#4]            ;94
00000e  f88d4008          STRB     r4,[sp,#8]            ;95
000012  a902              ADD      r1,sp,#8
000014  a801              ADD      r0,sp,#4
000016  f7fffffe          BL       MQTTDeserialize_ack
;;;100    	if (type == UNSUBACK)
00001a  f89d1004          LDRB     r1,[sp,#4]
00001e  290b              CMP      r1,#0xb
000020  d100              BNE      |L1.36|
;;;101    		rc = 1;
000022  2001              MOVS     r0,#1
                  |L1.36|
;;;102    	FUNC_EXIT_RC(rc);
;;;103    	return rc;
;;;104    }
000024  bd3e              POP      {r1-r5,pc}
;;;105    
                          ENDP


                          AREA ||i.MQTTSerialize_unsubscribe||, CODE, READONLY, ALIGN=1

                  MQTTSerialize_unsubscribe PROC
;;;48       */
;;;49     int MQTTSerialize_unsubscribe(unsigned char* buf, int buflen, unsigned char dup, unsigned short packetid,
000000  e92d5ffc          PUSH     {r2-r12,lr}
;;;50     		int count, MQTTString topicFilters[])
;;;51     {
000004  468a              MOV      r10,r1
000006  e9dd870c          LDRD     r8,r7,[sp,#0x30]
00000a  4606              MOV      r6,r0
;;;52     	unsigned char *ptr = buf;
;;;53     	MQTTHeader header = {0};
00000c  2500              MOVS     r5,#0
;;;54     	int rem_len = 0;
;;;55     	int rc = -1;
;;;56     	int i = 0;
;;;57     
;;;58     	FUNC_ENTRY;
;;;59     	if (MQTTPacket_len(rem_len = MQTTSerialize_unsubscribeLength(count, topicFilters)) > buflen)
00000e  9001              STR      r0,[sp,#4]
000010  469b              MOV      r11,r3                ;51
000012  4691              MOV      r9,r2                 ;51
000014  462c              MOV      r4,r5                 ;56
000016  4639              MOV      r1,r7
000018  4640              MOV      r0,r8
00001a  f7fffffe          BL       MQTTSerialize_unsubscribeLength
00001e  9000              STR      r0,[sp,#0]
000020  f7fffffe          BL       MQTTPacket_len
000024  4550              CMP      r0,r10
000026  dd02              BLE      |L2.46|
;;;60     	{
;;;61     		rc = MQTTPACKET_BUFFER_TOO_SHORT;
000028  1ea8              SUBS     r0,r5,#2
                  |L2.42|
;;;62     		goto exit;
;;;63     	}
;;;64     
;;;65     	header.byte = 0;
;;;66     	header.bits.type = UNSUBSCRIBE;
;;;67     	header.bits.dup = dup;
;;;68     	header.bits.qos = 1;
;;;69     	writeChar(&ptr, header.byte); /* write header */
;;;70     
;;;71     	ptr += MQTTPacket_encode(ptr, rem_len); /* write remaining length */;
;;;72     
;;;73     	writeInt(&ptr, packetid);
;;;74     
;;;75     	for (i = 0; i < count; ++i)
;;;76     		writeMQTTString(&ptr, topicFilters[i]);
;;;77     
;;;78     	rc = ptr - buf;
;;;79     exit:
;;;80     	FUNC_EXIT_RC(rc);
;;;81     	return rc;
;;;82     }
00002a  e8bd9ffc          POP      {r2-r12,pc}
                  |L2.46|
00002e  f3650507          BFI      r5,r5,#0,#8
000032  35a0              ADDS     r5,r5,#0xa0
000034  f36905c3          BFI      r5,r9,#3,#1           ;67
000038  f0250006          BIC      r0,r5,#6              ;68
00003c  1c80              ADDS     r0,r0,#2              ;68
00003e  b241              SXTB     r1,r0                 ;68
000040  a801              ADD      r0,sp,#4              ;69
000042  f7fffffe          BL       writeChar
000046  e9dd1000          LDRD     r1,r0,[sp,#0]         ;69
00004a  f7fffffe          BL       MQTTPacket_encode
00004e  9901              LDR      r1,[sp,#4]            ;71
000050  4408              ADD      r0,r0,r1              ;71
000052  9001              STR      r0,[sp,#4]            ;73
000054  4659              MOV      r1,r11                ;73
000056  a801              ADD      r0,sp,#4              ;73
000058  f7fffffe          BL       writeInt
00005c  e009              B        |L2.114|
                  |L2.94|
00005e  eb040044          ADD      r0,r4,r4,LSL #1       ;76
000062  eb070580          ADD      r5,r7,r0,LSL #2       ;76
000066  a801              ADD      r0,sp,#4              ;76
000068  e895000e          LDM      r5,{r1-r3}            ;76
00006c  f7fffffe          BL       writeMQTTString
000070  1c64              ADDS     r4,r4,#1              ;76
                  |L2.114|
000072  4544              CMP      r4,r8                 ;75
000074  dbf3              BLT      |L2.94|
000076  9801              LDR      r0,[sp,#4]            ;78
000078  1b80              SUBS     r0,r0,r6              ;78
00007a  e7d6              B        |L2.42|
;;;83     
                          ENDP


                          AREA ||i.MQTTSerialize_unsubscribeLength||, CODE, READONLY, ALIGN=1

                  MQTTSerialize_unsubscribeLength PROC
;;;27       */
;;;28     int MQTTSerialize_unsubscribeLength(int count, MQTTString topicFilters[])
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;29     {
;;;30     	int i;
;;;31     	int len = 2; /* packetid */
000004  2502              MOVS     r5,#2
000006  460e              MOV      r6,r1                 ;29
000008  4607              MOV      r7,r0                 ;29
;;;32     
;;;33     	for (i = 0; i < count; ++i)
00000a  2400              MOVS     r4,#0
00000c  e009              B        |L3.34|
                  |L3.14|
;;;34     		len += 2 + MQTTstrlen(topicFilters[i]); /* length + topic*/
00000e  eb040044          ADD      r0,r4,r4,LSL #1
000012  eb060080          ADD      r0,r6,r0,LSL #2
000016  c807              LDM      r0,{r0-r2}
000018  f7fffffe          BL       MQTTstrlen
00001c  4405              ADD      r5,r5,r0
00001e  1c64              ADDS     r4,r4,#1
000020  1cad              ADDS     r5,r5,#2
                  |L3.34|
000022  42bc              CMP      r4,r7                 ;33
000024  dbf3              BLT      |L3.14|
;;;35     	return len;
000026  4628              MOV      r0,r5
;;;36     }
000028  e8bd81f0          POP      {r4-r8,pc}
;;;37     
                          ENDP

